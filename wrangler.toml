name = "polished-pine-f503"
main = "src/index.ts"
compatibility_date = "2025-01-01"

# Cloudflare Worker configuration for api.hotel.com.tn
# This replaces Supabase Edge Functions as the primary API backend

[observability]
enabled = true

[env.production]
name = "api-hotel-com-tn"
workers_dev = false
routes = [
  { pattern = "api.hotel.com.tn/*", zone_name = "hotel.com.tn" }
]

[env.staging]
name = "api-hotel-com-tn-staging"
workers_dev = false

# Environment variables (set via wrangler secret or Cloudflare dashboard)
# DO NOT commit actual secrets to this file
# 
# Required secrets:
# - MYGO_LOGIN: MyGO API username
# - MYGO_PASSWORD: MyGO API password
# - SUPABASE_URL: Supabase project URL
# - SUPABASE_SERVICE_ROLE_KEY: Supabase service role key for backend operations
# - SUPABASE_ANON_KEY: Supabase anonymous key for public operations
# - JWT_SECRET: JWT secret for token verification (renamed from SUPABASE_JWT_SECRET due to Cloudflare restrictions)
# - CLICTOPAY_USERNAME: ClicToPay API username
# - CLICTOPAY_PASSWORD: ClicToPay API password
# - CLICTOPAY_SECRET: ClicToPay HMAC secret for callback verification
# - ALLOWED_ORIGINS: Comma-separated list of allowed CORS origins
#     Example: "https://www.hotel.com.tn,https://admin.hotel.com.tn,http://localhost:5173"
#     MUST include https://admin.hotel.com.tn for admin portal access
# - HOTEL_UPSTREAM_BASE_URL: Optional upstream URL (if needed)
# - GITHUB_SHA: Git commit SHA (injected at build time)
# - BUILT_AT: Build timestamp (injected at build time)
# - ENV: Environment name (production, staging, development)

# Build-time variables (set via GitHub Actions)
[vars]
ENV = "production"
